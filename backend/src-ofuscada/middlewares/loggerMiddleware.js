const a11_0x41992b=a11_0x33bc;(function(_0x27ab50,_0x537924){const _0x1126ac=a11_0x33bc,_0x1e9a88=_0x27ab50();while(!![]){try{const _0x1c9e8e=-parseInt(_0x1126ac(0xc7))/0x1*(parseInt(_0x1126ac(0xd0))/0x2)+parseInt(_0x1126ac(0xc2))/0x3*(parseInt(_0x1126ac(0xce))/0x4)+parseInt(_0x1126ac(0xc4))/0x5*(-parseInt(_0x1126ac(0xaf))/0x6)+parseInt(_0x1126ac(0xbe))/0x7*(-parseInt(_0x1126ac(0xc9))/0x8)+parseInt(_0x1126ac(0xcc))/0x9+parseInt(_0x1126ac(0xc8))/0xa*(-parseInt(_0x1126ac(0xba))/0xb)+parseInt(_0x1126ac(0xc5))/0xc;if(_0x1c9e8e===_0x537924)break;else _0x1e9a88['push'](_0x1e9a88['shift']());}catch(_0x3e358f){_0x1e9a88['push'](_0x1e9a88['shift']());}}}(a11_0x2e7b,0xcbe61));function a11_0x2e7b(){const _0x4c8c46=['/api/matriz/editCareer/:careerId','1246609OSEIEV','name','Error\x20al\x20procesar\x20la\x20solicitud:','Se\x20editó\x20una\x20Carrera','3vIHvWd','firstName','2245mjbgwk','57307692SnvzYB','user','762sltwvR','10873810GKqroW','72wPynag','error','includes','8480790rLHfhi','user-agent','146532arYcUL','originalUrl','2470iSnAIP','role','PUT','\x20realializo\x20una\x20accion','17214cZApUM','find','headers','firstLastName','action','Acción\x20desconocida','method','/getMatrizFilter','url','authorization','[a-zA-Z0-9]+','11tBPjcZ','accountId','GET'];a11_0x2e7b=function(){return _0x4c8c46;};return a11_0x2e7b();}function a11_0x33bc(_0x156a33,_0x33b368){const _0x2e7bbf=a11_0x2e7b();return a11_0x33bc=function(_0x33bc3b,_0x361af9){_0x33bc3b=_0x33bc3b-0xae;let _0xa11e1=_0x2e7bbf[_0x33bc3b];return _0xa11e1;},a11_0x33bc(_0x156a33,_0x33b368);}import{getHeaderToken,verifyJWT}from'../libs/jwt.js';import{logger}from'../log/LogActivity.js';import{sequelize}from'../database/connection.js';import{Account}from'../models/Account.js';import{Roles}from'../models/Roles.js';import{Users}from'../models/Users.js';const methodsToFilter=[a11_0x41992b(0xbc),'OPTIONS'],urlFilter=[a11_0x41992b(0xb6)],actions=[{'url':a11_0x41992b(0xbd),'action':a11_0x41992b(0xc1),'method':a11_0x41992b(0xd2)}];export const loggerMiddleware=async(_0x4d368c,_0x8f113a,_0x3c2d5d)=>{const _0x368a35=a11_0x41992b,_0x39f804=_0x4d368c[_0x368a35(0xb1)][_0x368a35(0xb8)],_0x3ffbf9=_0x4d368c[_0x368a35(0xb1)][_0x368a35(0xcd)];if(_0x39f804&&_0x39f804!=='Bearer\x20null'&&!methodsToFilter[_0x368a35(0xcb)](_0x4d368c[_0x368a35(0xb5)])&&!urlFilter['includes'](_0x4d368c['method'])){const _0x3594d1=getHeaderToken(_0x4d368c),_0x282644=await verifyJWT(_0x3594d1);try{const _0x10aef5=await Account['findOne']({'include':[{'model':Roles,'as':_0x368a35(0xd1)},{'model':Users,'as':_0x368a35(0xc6)}],'where':{'id':_0x282644[_0x368a35(0xbb)]}}),_0x50412d=actions[_0x368a35(0xb0)](_0x5c00b3=>{const _0x3c00ca=_0x368a35,_0x1bb1f5=_0x5c00b3[_0x3c00ca(0xb7)]['replace'](/:[a-zA-Z0-9]+/g,_0x3c00ca(0xb9)),_0x2b66fa=new RegExp('^'+_0x1bb1f5+'$');return _0x2b66fa['test'](_0x4d368c[_0x3c00ca(0xcf)])&&_0x5c00b3['method']===_0x4d368c[_0x3c00ca(0xb5)];}),_0x3e30bc=_0x50412d?_0x50412d[_0x368a35(0xb3)]:_0x368a35(0xb4);logger({'httpMethod':_0x4d368c['method'],'endPoint':_0x4d368c['originalUrl'],'action':_0x3e30bc,'description':'EL\x20'+_0x10aef5[_0x368a35(0xd1)][_0x368a35(0xbf)]+'\x20'+_0x10aef5[_0x368a35(0xc6)][_0x368a35(0xc3)]+'\x20'+_0x10aef5[_0x368a35(0xc6)][_0x368a35(0xb2)]+_0x368a35(0xae),'system':_0x3ffbf9});}catch(_0x36201a){console[_0x368a35(0xca)](_0x368a35(0xc0),_0x36201a);}}_0x3c2d5d();};